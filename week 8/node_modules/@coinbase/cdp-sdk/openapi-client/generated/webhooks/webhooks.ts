/**
 * Generated by orval v7.6.0 üç∫
 * Do not edit manually.
 * Coinbase Developer Platform APIs
 * The Coinbase Developer Platform APIs - leading the world's transition onchain.
 * OpenAPI spec version: 2.0.0
 */
import type {
  ListWebhookSubscriptionsParams,
  WebhookSubscriptionListResponse,
  WebhookSubscriptionRequest,
  WebhookSubscriptionResponse,
  WebhookSubscriptionUpdateRequest,
} from "../coinbaseDeveloperPlatformAPIs.schemas.js";

import { cdpApiClient } from "../../cdpApiClient.js";

type SecondParameter<T extends (...args: never) => unknown> = Parameters<T>[1];

/**
 * Retrieve a paginated list of webhook subscriptions for the authenticated project.
Returns subscriptions for all CDP product events (onchain, onramp/offramp, wallet, etc.)
in descending order by creation time.

### Use Cases
- Monitor all active webhook subscriptions across CDP products
- Audit webhook configurations
- Manage subscription lifecycle

 * @summary List webhook subscriptions
 */
export const listWebhookSubscriptions = (
  params?: ListWebhookSubscriptionsParams,
  options?: SecondParameter<typeof cdpApiClient>,
) => {
  return cdpApiClient<WebhookSubscriptionListResponse>(
    { url: `/v2/data/webhooks/subscriptions`, method: "GET", params },
    options,
  );
};
/**
 * Subscribe to real-time events across CDP products using flexible filtering.

### Event Types

**Onchain Events** - Monitor Base mainnet with microsecond precision:
- `onchain.activity.detected` - Smart contract events, transfers, swaps, NFT activity
- **Requires** `labels` for filtering (e.g., `contract_address`, `event_name`)

**Onramp/Offramp Events** - Transaction lifecycle notifications:
- `onramp.transaction.created`, `onramp.transaction.updated`
- `onramp.transaction.success`, `onramp.transaction.failed`
- `offramp.transaction.created`, `offramp.transaction.updated`
- `offramp.transaction.success`, `offramp.transaction.failed`
- **No labels required** - maximum simplicity for transaction monitoring

**Wallet Events** - Wallet activity notifications:
- `wallet.activity.detected`

### Webhook Signature Verification
All webhooks include cryptographic signatures for security.
The signature secret is returned in `metadata.secret` when creating a subscription.

**Note:** Webhooks are in beta and this interface is subject to change.

See the [verification guide](https://docs.cdp.coinbase.com/onramp-&-offramp/webhooks#webhook-signature-verification) for implementation details.

### Onchain Label Filtering

For `onchain.activity.detected` events, use `labels` for precise filtering with AND logic (max 20 labels per webhook).

**Allowed labels** (all in snake_case format):
- `network` (required) - Blockchain network
- `contract_address` - Smart contract address
- `event_name` - Event name (e.g., "Transfer", "Burn")
- `event_signature` - Event signature hash
- `transaction_from` - Transaction sender address
- `transaction_to` - Transaction recipient address
- `params.*` - Any event parameter (e.g., `params.from`, `params.to`, `params.sender`, `params.tokenId`)

**Examples**:
- **Liquidity Pool Monitor**: `{"network": "base-mainnet", "contract_address": "0xcd1f9777571493aeacb7eae45cd30a226d3e612d", "event_name": "Burn"}`
- **Price Oracle Tracker**: `{"network": "base-mainnet", "contract_address": "0xbac4a9428ea707c51f171ed9890c3c2fa810305d", "event_name": "PriceUpdated"}`
- **DeFi Protocol Activity**: `{"network": "base-mainnet", "contract_address": "0x45c6e6a47a711b14d8357d5243f46704904578e3", "event_name": "Deposit"}`

 * @summary Create webhook subscription
 */
export const createWebhookSubscription = (
  webhookSubscriptionRequest: WebhookSubscriptionRequest,
  options?: SecondParameter<typeof cdpApiClient>,
) => {
  return cdpApiClient<WebhookSubscriptionResponse>(
    {
      url: `/v2/data/webhooks/subscriptions`,
      method: "POST",
      headers: { "Content-Type": "application/json" },
      data: webhookSubscriptionRequest,
    },
    options,
  );
};
/**
 * Retrieve detailed information about a specific webhook subscription including
configuration, status, creation timestamp, and webhook signature secret.

### Response Includes
- Subscription configuration and filters
- Target URL and custom headers
- Webhook signature secret for verification
- Creation timestamp and status

 * @summary Get webhook subscription details
 */
export const getWebhookSubscription = (
  subscriptionId: string,
  options?: SecondParameter<typeof cdpApiClient>,
) => {
  return cdpApiClient<WebhookSubscriptionResponse>(
    { url: `/v2/data/webhooks/subscriptions/${subscriptionId}`, method: "GET" },
    options,
  );
};
/**
 * Update an existing webhook subscription's configuration including
event types, target URL, filtering criteria, and enabled status.
All required fields must be provided, even if they are not being changed.

### Common Updates
- Change target URL or headers
- Add/remove event type filters
- Update multi-label filtering criteria
- Enable/disable subscription

 * @summary Update webhook subscription
 */
export const updateWebhookSubscription = (
  subscriptionId: string,
  webhookSubscriptionUpdateRequest: WebhookSubscriptionUpdateRequest,
  options?: SecondParameter<typeof cdpApiClient>,
) => {
  return cdpApiClient<WebhookSubscriptionResponse>(
    {
      url: `/v2/data/webhooks/subscriptions/${subscriptionId}`,
      method: "PUT",
      headers: { "Content-Type": "application/json" },
      data: webhookSubscriptionUpdateRequest,
    },
    options,
  );
};
/**
 * Permanently delete a webhook subscription and stop all event deliveries.
This action cannot be undone.

### Important Notes
- All webhook deliveries will cease immediately
- Subscription cannot be recovered after deletion
- Consider disabling instead of deleting for temporary pauses

 * @summary Delete webhook subscription
 */
export const deleteWebhookSubscription = (
  subscriptionId: string,
  options?: SecondParameter<typeof cdpApiClient>,
) => {
  return cdpApiClient<void>(
    { url: `/v2/data/webhooks/subscriptions/${subscriptionId}`, method: "DELETE" },
    options,
  );
};
export type ListWebhookSubscriptionsResult = NonNullable<
  Awaited<ReturnType<typeof listWebhookSubscriptions>>
>;
export type CreateWebhookSubscriptionResult = NonNullable<
  Awaited<ReturnType<typeof createWebhookSubscription>>
>;
export type GetWebhookSubscriptionResult = NonNullable<
  Awaited<ReturnType<typeof getWebhookSubscription>>
>;
export type UpdateWebhookSubscriptionResult = NonNullable<
  Awaited<ReturnType<typeof updateWebhookSubscription>>
>;
export type DeleteWebhookSubscriptionResult = NonNullable<
  Awaited<ReturnType<typeof deleteWebhookSubscription>>
>;
